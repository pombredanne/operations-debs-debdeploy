debdeploy (0.0.99-1) UNRELEASED; urgency=medium

  * Migrate away from Salt towards Cumin and clean out some code
    which turned out to be useful on paper, but not so useful
    in practice
  * Remove feature to trigger restarts based on the program name,
    worked in general, but it's a saner choice to require the
    service name (especially since all distros are converging to
    systemd anyway) and it avoids dealing with a lot of special
    cases. Anyone managing service restarts should be expected
    to know the service name anyway.
  * Remove feature to deploy and remove software, such tasks should
    be handled by puppet or a similar system configuration tool.
    This was part of the initial debdeploy releases, but was never
    used in practice, so removing it.
  * Restart detection after a library update is now decoupled from
    the deployment process. This simplifies the deployment of staged
    rollouts a lot (e.g. if two libraries are updated which are linked
    by HHVM and if the deployed combines the HHVM restart for both
    updates)
  * In the clients operate on ID and VERSION_ID only, previous we used
    the Debian code name populated by Salt. The YAML files still
    address code names, that'll be parsed from a config file so that
    supporting a new release only needs to be enabled on the server
  * Create a new package debdeploy-client for the Cumin-based client
    which is co-installable with the Salt minion (still needed for
    a transition period)
  * Create a new package debdeploy-server for the Cumin-based server

 -- Moritz Muehlenhoff <mmuhlenhoff@wikimedia.org>  Fri, 07 Jul 2017 13:49:03 +0200

debdeploy (0.0.10-1) jessie-wikimedia; urgency=medium

  * Fix a traceback in status display
  * List hosts needing a restart by default instead of only showing
    the amount of processes requiring a restart
  * In some error situations, the minions return not an actual result
    dict, but a free-form string error message. Log these as well.
    Also, fix local minion apt logging in that case.
  * Detect outdated package versions and flag an error
  * Packages in deinstalled status ("rc" in dpkg) are now ignored by
    the minion
  * List all required restarts next to the new restarts introduced by
    the library upgrade, useful when updating severals in one batch
    and bundling the service restarts
  * Fix traceback in error message if update is deployed twice
  * Allow blacklisting of legacy packages, see chapter "Dealing with
    legacy binary packages" in readme.txt
  * Fixed handling of YAML files explicitly omitting a distro release

 -- Moritz Muehlenhoff <mmuhlenhoff@wikimedia.org>  Fri, 20 Nov 2015 12:50:01 +0100

debdeploy (0.0.9-1) jessie-wikimedia; urgency=medium

  * Tweak logging and make debug logging configurable
  * Fix rollback jid handling, with compound matching we only have a
    single jid
  * Fix traceback for verbose view of status-deploy
  * Record the name of the server group in the jobs database rather
    then referencing the Salt grains. This was a poor initial design
    decision which causes problems when deploying an update to server
    groups with overlapping Salt grains.

 -- Moritz Muehlenhoff <mmuhlenhoff@wikimedia.org>  Fri, 02 Oct 2015 17:00:15 +0200

debdeploy (0.0.8-1) jessie-wikimedia; urgency=medium

  * Move generation of spec files to a separate command installed in /usr/bin
  * Fix syntax of generated YAML files
  * Fix parsing of dpkg status file for binNMUed packages

 -- Moritz Muehlenhoff <mmuhlenhoff@wikimedia.org>  Fri, 25 Sep 2015 16:52:23 +0200

debdeploy (0.0.7-1) jessie-wikimedia; urgency=medium

  * Improve error handling in case of malformed YAML specs
  * Implement a generate-spec command to interactively generate a new
    update spec file
  * Improve Minion logging so that it abides the standard Salt minion
    log level
  * Add checks against incomplete Salt replies

 -- Moritz Muehlenhoff <mmuhlenhoff@wikimedia.org>  Fri, 18 Sep 2015 15:29:39 +0200

debdeploy (0.0.6-1) jessie-wikimedia; urgency=medium

  * Ensure debdeploy is run with root credentials
  * Add a command 'list-server-group-members' to show all servers
    matched by a server group
  * Remove postinsts

 -- Moritz Muehlenhoff <mmuhlenhoff@wikimedia.org>  Fri, 11 Sep 2015 13:57:45 +0200

debdeploy (0.0.5-1) jessie-wikimedia; urgency=medium

  * Add a Salt returner for local logging
  * Add workaround for Salt bug writing out it's return status to stdout
  * Use compound matching to properly support server groups with
    overlapping grains

 -- Moritz Muehlenhoff <mmuhlenhoff@wikimedia.org>  Mon, 07 Sep 2015 15:20:01 +0200

debdeploy (0.0.4-1) jessie-wikimedia; urgency=medium

  * Implement list-server-groups command
  * Fix restart of salt-master

 -- Moritz Muehlenhoff <mmuhlenhoff@wikimedia.org>  Fri, 04 Sep 2015 13:37:23 +0200

debdeploy (0.0.3-1) jessie-wikimedia; urgency=medium

  * Remove some currently unused imports

 -- Moritz Muehlenhoff <mmuhlenhoff@wikimedia.org>  Fri, 28 Aug 2015 10:01:32 +0200

debdeploy (0.0.2-2) jessie-wikimedia; urgency=medium

  * Bump version

 -- Moritz Muehlenhoff <jmm@korn.westfalen.local>  Tue, 25 Aug 2015 11:31:13 +0200

debdeploy (0.0.2-1) jessie-wikimedia; urgency=medium

  * Changes from initial review

 -- Moritz Muehlenhoff <mmuhlenhoff@wikimedia.org>  Tue, 25 Aug 2015 10:22:55 +0200

debdeploy (0.0.1-1) jessie-wikimedia; urgency=low

  * Initial release

 -- Moritz Muehlenhoff <moritz@wikimedia.org>  Mon,  8 Jun 2015 16:19:58 +0100
